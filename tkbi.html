<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Explorer TKBI Versi 3</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body { font-family: 'Inter', sans-serif; }
</style>
</head>

<body class="bg-gray-100 text-gray-800">

<div class="container mx-auto p-6">

    <!-- HEADER -->
    <header class="text-center mb-8">
        <h1 class="text-3xl md:text-4xl font-bold text-[#003f5c]">
            TKBI Versi 3 – Explorer Non-UMKM
        </h1>
        <p class="text-gray-600 mt-2">
            Technical Screening Criteria – Taksonomi Keuangan Berkelanjutan Indonesia
        </p>
    </header>

    <!-- SEARCH -->
    <div class="bg-white rounded-lg shadow p-4 mb-6">
        <input id="searchBox"
               type="text"
               placeholder="Cari KBLI, sektor, atau kata kunci..."
               class="w-full border rounded-lg p-3">
    </div>

    <!-- TABLE -->
    <div class="bg-white rounded-lg shadow overflow-auto">
        <table class="min-w-full text-sm" id="tkbiTable">
            <thead class="bg-gray-100">
                <tr>
                    <th class="p-2 border">Sektor</th>
                    <th class="p-2 border">KBLI</th>
                    <th class="p-2 border">TSC</th>
                    <th class="p-2 border">DNSH</th>
                    <th class="p-2 border">RMT</th>
                    <th class="p-2 border">Aspek Sosial</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

</div>

<script>

let tkbiData = [];

// ===== LOAD JSON =====
fetch("./tkbi_v3.json")
.then(res => res.json())
.then(data => {
    alert("JSON berhasil dimuat");
    tkbiData = data;
    renderTable(tkbiData);
});


// ===== RENDER =====
function renderTable(data) {

    const tbody = document.querySelector("#tkbiTable tbody");
    tbody.innerHTML = "";

    data.forEach(row => {

        const tr = document.createElement("tr");

        tr.innerHTML = `
            <td class="border p-2">${row.Nama}</td>
            <td class="border p-2">${row.KBLI}</td>
            <td class="border p-2 whitespace-pre-wrap">${row.TSC}</td>
            <td class="border p-2 whitespace-pre-wrap">${row.DNSH}</td>
            <td class="border p-2 whitespace-pre-wrap">${row.RMT}</td>
            <td class="border p-2 whitespace-pre-wrap">${row.AspekSosial}</td>
        `;

        tbody.appendChild(tr);
    });
}


// ===== SEARCH =====
document.getElementById("searchBox").addEventListener("input", function () {

    const keyword = this.value.toLowerCase();

    const filtered = tkbiData.filter(item =>
        item.Nama.toLowerCase().includes(keyword) ||
        item.KBLI.toLowerCase().includes(keyword) ||
        item.TSC.toLowerCase().includes(keyword)
    );

    renderTable(filtered);
});

</script>

</body>
</html>
