<!DOCTYPE html>

<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Kalkulator Simulasi Recovery Plan</title>

<script src="https://cdn.tailwindcss.com"></script>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<!-- ===== GLOBAL ANTI CACHE ===== -->

<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

<style>
body { font-family: 'Inter', sans-serif; }
.result-box { transition: all 0.3s ease-in-out; }
.bg-good { background-color: #dcfce7; color: #166534; }
.bg-warning { background-color: #fef9c3; color: #854d0e; }
.bg-crisis { background-color: #fee2e2; color: #991b1b; }

.form-input {
    width: 100%;
    padding: 8px 12px;
    border-radius: 6px;
    border: 1px solid #d1d5db;
}
.form-input:focus {
    outline: none;
    border-color: #1d4ed8;
}
</style>

</head>

<body class="bg-gray-100 text-gray-800">

<div class="container mx-auto p-4 sm:p-6 lg:p-8">

<header class="text-center mb-8">
<h1 class="text-3xl font-bold text-blue-800">
Kalkulator Simulasi Stress Test & Recovery Plan
</h1>
<p class="mt-2 text-gray-600">
Alat interaktif untuk mengukur dampak krisis dan efektivitas opsi pemulihan.
</p>
</header>

<div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

<!-- ===== INPUT ===== -->

<div class="lg:col-span-1 space-y-6">

<div class="bg-white p-6 rounded-lg shadow-md">
<h2 class="text-xl font-bold mb-4 border-b pb-2">
Input Data Baseline (Miliar Rp)
</h2>

<div class="space-y-3">
<input id="totalModal" class="form-input" value="18000">
<input id="atmr" class="form-input" value="100000">
<input id="hqla" class="form-input" value="30000">
<input id="arusKasKeluar" class="form-input" value="20000">
<input id="totalAset" class="form-input" value="120000">
<input id="kreditBermasalah" class="form-input" value="2000">
<input id="totalKredit" class="form-input" value="80000">
</div>
</div>

<div class="bg-white p-6 rounded-lg shadow-md">
<h2 class="text-xl font-bold mb-4 border-b pb-2">
Skenario Stres
</h2>

<input id="creditLossShock" class="form-input" value="5">
<input id="depositOutflow" class="form-input" value="25">
</div>

<div class="bg-white p-6 rounded-lg shadow-md">
<h2 class="text-xl font-bold mb-4 border-b pb-2">
Opsi Pemulihan
</h2>

<input id="capitalInjection" class="form-input" value="3000">
<input id="emergencyFunding" class="form-input" value="5000">
</div>

<button id="calculateBtn"
class="w-full bg-blue-700 text-white py-3 rounded-lg">
Hitung Simulasi </button>

</div>

<!-- ===== RESULT ===== -->

<div class="lg:col-span-2">

<div class="bg-white p-6 rounded-lg shadow-md">
<h2 class="text-2xl font-bold mb-6 text-center">
Hasil Simulasi
</h2>

<div class="grid md:grid-cols-3 gap-4 text-center">
<div id="baselineResults"></div>
<div id="stressedResults"></div>
<div id="recoveryResults"></div>
</div>

</div>

</div>

</div>

<!-- ===== BACK BUTTON ===== -->

<div class="mt-8 text-center">

<a href="#" id="backBtn"
class="inline-block bg-gray-800 text-white px-6 py-3 rounded-lg shadow hover:bg-gray-700">
â¬… Back to the Main Page </a>

</div>

</div>

<script>

// ===== VERSIONING =====
const VERSION = new Date().getTime();

// ===== FORCE NO CACHE BACK BUTTON =====
document.getElementById("backBtn").addEventListener("click", function(e){
    e.preventDefault();
    window.location.href = "index.html?v=" + VERSION;
});

// ===== CALCULATE =====
document.getElementById('calculateBtn').addEventListener('click', () => {

const totalModal = +document.getElementById('totalModal').value;
const atmr = +document.getElementById('atmr').value;
const hqla = +document.getElementById('hqla').value;
const arusKasKeluar = +document.getElementById('arusKasKeluar').value;
const totalAset = +document.getElementById('totalAset').value;
const kreditBermasalah = +document.getElementById('kreditBermasalah').value;
const totalKredit = +document.getElementById('totalKredit').value;

const creditLossShock = +document.getElementById('creditLossShock').value / 100;
const depositOutflow = +document.getElementById('depositOutflow').value / 100;

const capitalInjection = +document.getElementById('capitalInjection').value;
const emergencyFunding = +document.getElementById('emergencyFunding').value;

// Baseline
const baseCAR = (totalModal / atmr) * 100;
const baseLCR = (hqla / arusKasKeluar) * 100;
const baseNPL = (kreditBermasalah / totalKredit) * 100;

// Stress
const kerugian = totalKredit * creditLossShock;
const stressedCAR = ((totalModal - kerugian) / atmr) * 100;
const stressedNPL = ((kreditBermasalah + kerugian) / totalKredit) * 100;

const stressedOutflow = arusKasKeluar + (totalAset - totalModal) * depositOutflow;
const stressedLCR = (hqla / stressedOutflow) * 100;

// Recovery
const recoveredCAR = ((totalModal - kerugian + capitalInjection) / atmr) * 100;
const recoveredLCR = ((hqla + emergencyFunding) / stressedOutflow) * 100;

// Display
display('baselineResults', baseCAR, baseLCR, baseNPL);
display('stressedResults', stressedCAR, stressedLCR, stressedNPL);
display('recoveryResults', recoveredCAR, recoveredLCR, stressedNPL);

});

function display(id, car, lcr, npl){
document.getElementById(id).innerHTML = `
<div class="result-box bg-good p-3 rounded">
CAR ${car.toFixed(2)}%
</div>
<div class="result-box bg-warning p-3 rounded">
LCR ${lcr.toFixed(2)}%
</div>
<div class="result-box bg-crisis p-3 rounded">
NPL ${npl.toFixed(2)}%
</div>`;
}

// Auto run
document.getElementById('calculateBtn').click();

</script>

</body>
</html>
